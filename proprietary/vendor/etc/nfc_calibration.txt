# ----------------------------------------------
# Test name: 	SN1X0_SPC
# Description:	runs SPC
# Revision:		2.00
# Date:			27/07/2020
# Tool rev:		1.12 or later
# ----------------------------------------------

version
interval 200
reset 1

#// NCI CORE RESET CMD
send 20000100
receive

#// NCI CORE INIT CMD
send 2001020000

#// NCI CORE SETCONFIG CMD:
send 20020401850101

#// NCI SYSTEM ENABLE PROPRIETARY CMD
send 2F0200
#//Set Power mode to Idle
#//send 2F000100
#//RF_CLOCKSetting
send 20030301A011
#//Read Customer Phase before SPC
send 20030301A017

#//SET SPC FIRST STEP --> SPC CALIBRATION for 19.2MHz, 26MHz, 27.12MHz, 32MHz, 38.4MHz & 48MHz
send 2F3D223000282F000351000000000200000014000000000000000000000000000000000000
#//SET SPC FIRST STEP --> SPC CALIBRATION for HFO (22.5MHz)
#//send 2F3D223000022F140351000000000206000A14140014000000000000000000000000000000
#//COPY SPC CMD BLKO (2F3D0F3XXXXX) HERE (from SPC Excel file)
#//send 2F3D223000022F1403515308D49B0206000A14140014000000000000000000000000000000
send 2F3D223000322F0C0351E90DF8AE0200000A14000000000000000000000000000000000000


#//SPC CMD [PLL sweep] input clock HFO (22.5MHz)
#//Set SPC configuration Block1
#//send 2F3D7E3001C3D5037203D6017283D60472C3D6027203D7007283D70372C3D7017243D8047283D80272C3D8007243D9037283D9017203DA047243DA027283DA007203DB037243DB0172C3DB047203DC027243DC0072C3DC037203DD017283DD0472C3DD027203DE007283DE0372C3DE017243DF047283DF0272C3DF007243E00372
#//sleep 100
#//Set SPC configuration Block2
#//send 2F3D7E300283E0017203E1047243E1027283E1007203E2037243E20172C3E2047203E3027243E30072C3E3037203E4017283E40472C3E4027203E5007283E50372C3E5017243E6047283E60272C3E6007243E7037283E7017203E8047243E8027283E8007203E9037243E90172C3E9047203EA027243EA0072C3EA037203EB0172
#//sleep 100
#//Set SPC configuration Block3
#//send 2F3D4E300383EB0472C3EB027203EC007283EC0372C3EC017243ED047283ED0272C3ED007243EE037283EE017203EF047243EF027283EF007203F0037243F00172C3F0047280900066C0900466C0900366
#//sleep 100
#//SPC CMD [PLL sweep] input clock 26MHz
#//Set SPC configuration Block1
send 2F3D7E300142A5016282A5036282A50062C2A5026202A6046202A6016242A6036242A6006282A60262C2A60462C2A6016202A7036202A7006242A7026282A7046282A70162C2A70362C2A7006202A8026242A8046242A8016282A8036282A80062C2A8026202A9046202A9016242A9036242A9006282A90262C2A90462C2A90162
sleep 100
#//Set SPC configuration Block2
send 2F3D7E300202AA036202AA006242AA026282AA046282AA0162C2AA0362C2AA006202AB026242AB046242AB016282AB036282AB0062C2AB026202AC046202AC016242AC036242AC006282AC0262C2AC0462C2AC016202AD036202AD006242AD026282AD046282AD0162C2AD0362C2AD006202AE026242AE046242AE016282AE0362
sleep 100
#//Set SPC configuration Block3
send 2F3D4E300382AE0062C2AE026202AF046202AF016242AF036242AF006282AF0262C2AF0462C2AF016202B0036202B0006242B0026282B0046282B00162C2B00362C2B0006202B1026242B1046242B10162
sleep 100

#//Start SPC Algorithm
send 2F3D0131
trigger 6F3D07
#//Read Customer Phase after SPC
send 20030301A017
receive